// ==UserScript==
// @name         Add Button
// @namespace    http://tampermonkey.net/
// @version      2.1
// @description  Making IG a little better :)
// @author       QuinnLee
// @match        https://azshared.agatesoftware.com/*
// @match        https://shared.agatesoftware.com/*
// @match        https://demo.agatesoftware.com/*
// @match        http://localhost:50963/*
// @grant        none
// ==/UserScript==


var txtGoToObject = document.createElement("INPUT");
(

    function() {

        'use strict';
//         if (!window.location.href.includes('&thx=1138')) {
//             window.location.href = window.location.href + '&thx=1138';
//         };//true

        if (window.location.href.includes('PasswordExpired=1')) {
            window.location.href = window.location.href.replace('PasswordExpired=1', '');
        };

        var btnShowButtons = document.createElement("Button");
        btnShowButtons.innerHTML = "+";
        btnShowButtons.style = "Bottom:5px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px; border-style: solid; color: white; font-size: 20px; border-color: black; width: 30px; height: 30px; vertical-align: middle; ";
        btnShowButtons.addEventListener ("click", ShowButtons, false);
        document.body.appendChild(btnShowButtons);

        var btnAddSave = document.createElement("Button");
        btnAddSave.innerHTML = "Save Page";
        btnAddSave.style = "Bottom:40px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px; visibility:hidden; border-style: solid; color: white; width:100px; border-color: black; height: 25px; font-size: 13.3333px;";
        btnAddSave.addEventListener ("click", AddSaveURL, false);
        btnAddSave.setAttribute("id", "btnAddSave");
        document.body.appendChild(btnAddSave);


        var btnAddDebug = document.createElement("Button");
        if (!window.location.href.includes('&showdebug=1')) {
            btnAddDebug.innerHTML = "Debug Page";
        } else{
            btnAddDebug.innerHTML = "End Debug";
        }
        btnAddDebug.setAttribute("tag", "btnIGOverlay");
        btnAddDebug.style = "Bottom:70px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px; visibility:hidden; border-style: solid; color: white; width:100px; border-color: black; height: 25px; font-size: 13.3333px;";
        btnAddDebug.addEventListener ("click", AddDebugURL, false);
        btnAddDebug.setAttribute("id", "btnAddDebug");
        document.body.appendChild(btnAddDebug);

        var btnQuickLogin = document.createElement("Button");
        btnQuickLogin.innerHTML = "Quick Login";
        btnQuickLogin.setAttribute("id", "btnQuickLogin");
        btnQuickLogin.style = "Bottom:100px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px;visibility:hidden; border-style: solid; color: white; width:100px;border-color: black; height: 25px; font-size: 13.3333px;";
        btnQuickLogin.addEventListener ("click", QuickLoginURL, false);
        document.body.appendChild(btnQuickLogin);

        var btnGoToObject = document.createElement("Button");
        btnGoToObject.innerHTML = "Go To Object";
        btnGoToObject.style = "Bottom:190px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px;visibility:hidden; border-style: solid; color: white; width:100px;border-color: black; height: 25px; font-size: 13.3333px;";
        btnGoToObject.addEventListener ("click", GoToObject, false);
        btnGoToObject.setAttribute("id", "btnGoToObject");
        document.body.appendChild(btnGoToObject);

        txtGoToObject.setAttribute("type", "text");
        txtGoToObject.style = "Bottom:220px;right:5px; position:fixed;background-Color:hotpink;border-radius: 5px;visibility:hidden; border-style: solid; color: white; width:98px;border-color: black; height: 25px; text-align: center; font-size: 13.3333px;";
        txtGoToObject.setAttribute("id", "txtGoToObject");
        document.body.appendChild(txtGoToObject);

        var btnLogOut = document.createElement("Button");
        btnLogOut.innerHTML = "Logout";
        btnLogOut.setAttribute("id", "btnLogOut");
        btnLogOut.style = "Bottom:130px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px; Display:;visibility:hidden; border-style: solid; color: white; width:100px;border-color: black; height: 25px; font-size: 13.3333px;";
        btnLogOut.addEventListener ("click", LoutOutURL, false);
        document.body.appendChild(btnLogOut);

        var btnPCVIDToolTips = document.createElement("Button");
        btnPCVIDToolTips.innerHTML = "PCV IDs";
        btnPCVIDToolTips.setAttribute("id", "btnPCVIDToolTips");
        btnPCVIDToolTips.style = "Bottom:160px;right:5px;position:fixed;background-Color:hotpink;border-radius: 5px;visibility:hidden; border-style: solid; color: white; width:100px;border-color: black; height: 25px; font-size: 13.3333px;";
        btnPCVIDToolTips.addEventListener ("click", pcvToolTip, false);
        document.body.appendChild(btnPCVIDToolTips);
    }





)();

function ShowButtons() {

    var x = document.getElementById("btnAddSave").style.visibility;


    if (x == "visible"){
        x = "hidden";
        console.log(1);
    }else{
        x = "visible";
        console.log(2);
    }

    document.getElementById("btnAddSave").style.visibility = x;
    document.getElementById("btnAddDebug").style.visibility = x;
    document.getElementById("btnQuickLogin").style.visibility = x;
    document.getElementById("btnGoToObject").style.visibility = x;
    document.getElementById("txtGoToObject").style.visibility = x;
    document.getElementById("btnLogOut").style.visibility = x;
    document.getElementById("btnPCVIDToolTips").style.visibility = x;


}

function AddSaveURL() {
    if (!window.location.href.includes('&thx=1138')) {
        window.location.href = window.location.href + '&thx=1138';
    };

}

function AddDebugURL() {
    if (!window.location.href.includes('&showdebug=1')) {
        window.location.href = window.location.href + '&showdebug=1';
    }else{
        window.location.href = window.location.href.replace('&showdebug=1','');
    }
}

function QuickLoginURL() {
    var pathArray = window.location.pathname.split('/');
    var secondLevelLocation = pathArray[1];
    window.location.href = "/" + secondLevelLocation +"/admin/quicklogin2.aspx";
}

function LoutOutURL() {
    var pathArray = window.location.pathname.split('/');
    var secondLevelLocation = pathArray[1];
    window.location.href = "/" + secondLevelLocation +"/login2.aspx";
}

function GoToObject() {
    var pathArray = window.location.pathname.split('/');
    var secondLevelLocation = pathArray[1];
    window.location.href = "/" + secondLevelLocation +"/Menu_Object2.aspx?objID="+txtGoToObject.value;
}

function pcvToolTip() {
    var inputs = document.getElementsByTagName('input');
    for (var i = 0; i < inputs.length; i += 1) {
        inputs[i].title = inputs[i].id;
    }

    var textareas = document.getElementsByTagName('textarea');
    for (i = 0; i < textareas.length; i += 1) {
        textareas[i].title = textareas[i].id;
    }

    var spans = document.getElementsByTagName('span');
    for (i = 0; i < spans.length; i += 1) {
        spans[i].title = spans[i].id;
    }

    var selects = document.getElementsByTagName('select');
    for (i = 0; i < selects.length; i += 1) {
        selects[i].title = selects[i].id;
    }
}


